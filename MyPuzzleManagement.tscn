[gd_scene load_steps=4 format=2]

[ext_resource path="res://textures/abstract-art-decoration-1029624.jpg" type="Texture" id=1]
[ext_resource path="res://textures/full_button_font.tres" type="DynamicFont" id=2]

[sub_resource type="GDScript" id=1]

script/source = "extends Control

const list_item_class=preload(\"res://ListItem.tscn\")

func _ready():
	game_data.current_collection=game_data.my_puzzles
	generate_list(game_data.my_puzzles)

func generate_list(collection):
	var idx=0
	var container=$ScrollContainer/PuzzleList
	for puzzle in collection.puzzles:
		idx+=1
		var item=list_item_class.instance()
		item.text=puzzle.name
		item.value=puzzle
		item.allow_delete=true
		item.connect(\"selected\",self,\"on_item_pressed\")
		item.connect(\"deleted\",self,\"on_item_deleted\")
		container.add_child(item)

func on_item_pressed(source):
	get_tree().call_group(\"sfx\",\"play\",\"select\")
	game_data.current_puzzle=source.value
	get_tree().change_scene(\"res://PuzzleProperties.tscn\")

func on_item_deleted(source):
	get_tree().call_group(\"sfx\",\"play\",\"select\")
	game_data.delete_mypuzzle(source.value)
	$ScrollContainer/PuzzleList.remove_child(source)
	source.queue_free()
	game_data.save_to_file()

func _on_BackBtn_pressed():
	get_tree().call_group(\"sfx\",\"play\",\"select\")
	get_tree().change_scene(\"res://MainMenu.tscn\")


func _on_newPuzzleBtn_pressed():
	game_data.create_new_puzzle()
	get_tree().change_scene(\"res://Builder.tscn\")


func _on_ExportBtn_pressed():
	get_tree().change_scene(\"res://Exporter.tscn\")
"

[node name="MyPuzzleManagement" type="Control" index="0"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
script = SubResource( 1 )

[node name="TextureRect" type="TextureRect" parent="." index="0"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
texture = ExtResource( 1 )
expand = true
stretch_mode = 2

[node name="ScrollContainer" type="ScrollContainer" parent="." index="1"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 50.0
margin_top = 70.0
margin_right = -54.0
margin_bottom = -130.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = true
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
scroll_horizontal_enabled = false
scroll_horizontal = 0
scroll_vertical_enabled = true
scroll_vertical = 0
scroll_deadzone = 0
_sections_unfolded = [ "Scroll" ]

[node name="PuzzleList" type="VBoxContainer" parent="ScrollContainer" index="0"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_right = 920.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 3
size_flags_vertical = 1
alignment = 0
_sections_unfolded = [ "Anchor", "Size Flags" ]

[node name="BackBtn" type="Button" parent="." index="2"]

anchor_left = 0.0
anchor_top = 1.0
anchor_right = 0.0
anchor_bottom = 1.0
margin_left = 20.0
margin_top = -100.0
margin_right = 190.0
margin_bottom = -15.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
focus_mode = 2
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
custom_fonts/font = ExtResource( 2 )
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
group = null
text = "Back"
flat = false
align = 1
_sections_unfolded = [ "custom_colors", "custom_fonts" ]

[node name="ExportBtn" type="Button" parent="." index="3"]

anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -194.0
margin_top = -100.0
margin_right = -24.0
margin_bottom = -15.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
focus_mode = 2
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
custom_fonts/font = ExtResource( 2 )
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
group = null
text = "Export"
flat = false
align = 1
_sections_unfolded = [ "custom_colors", "custom_fonts" ]

[node name="newPuzzleBtn" type="Button" parent="." index="4"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 0.0
margin_left = 50.0
margin_top = 10.0
margin_right = -54.0
margin_bottom = 50.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
focus_mode = 2
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
custom_fonts/font = ExtResource( 2 )
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
group = null
text = "New puzzle"
flat = false
align = 1
_sections_unfolded = [ "custom_fonts" ]

[connection signal="pressed" from="BackBtn" to="." method="_on_BackBtn_pressed"]

[connection signal="pressed" from="ExportBtn" to="." method="_on_ExportBtn_pressed"]

[connection signal="pressed" from="newPuzzleBtn" to="." method="_on_newPuzzleBtn_pressed"]


