[gd_scene load_steps=4 format=2]

[ext_resource path="res://textures/abstract-art-decoration-1029624.jpg" type="Texture" id=1]
[ext_resource path="res://textures/full_button_font.tres" type="DynamicFont" id=2]

[sub_resource type="GDScript" id=1]

script/source = "extends Control

const list_item_class=preload(\"res://PuzzleListItem.tscn\")
const game_scene=preload(\"res://Main.tscn\")

func _ready():
	get_tree().call_group(\"sfx\",\"set_music\",\"menu.ogg\")
	pass

func generate_list(collection):
	var idx=0
	var container=$ScrollContainer/PuzzleList
	for puzzle in collection.puzzles:
		idx+=1
		var item=list_item_class.instance()
		if puzzle.my_rank.completed:
			item.caption=puzzle.name
		else:
			item.caption=\"Puzzle %04d\" % idx
		item.puzzle=puzzle
		item.connect(\"selected\",self,\"on_item_pressed\")
		container.add_child(item)

func on_item_pressed(source):
	game_data.current_puzzle=source.puzzle
	get_tree().call_group(\"sfx\",\"play\",\"select\")
	var instance=game_scene.instance()
	get_tree().get_root().add_child(instance)
	get_tree().set_current_scene( instance )
	instance.start_puzzle(source.puzzle)
	queue_free()

func _on_BackBtn_pressed():
	get_tree().call_group(\"sfx\",\"play\",\"select\")
	get_tree().change_scene(\"res://LevelSelection.tscn\")
"

[node name="PuzzleSelection" type="Control"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
script = SubResource( 1 )

[node name="TextureRect" type="TextureRect" parent="." index="0"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
texture = ExtResource( 1 )
expand = true
stretch_mode = 2

[node name="ScrollContainer" type="ScrollContainer" parent="." index="1"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 50.0
margin_top = 50.0
margin_right = -54.0
margin_bottom = -130.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = true
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
scroll_horizontal_enabled = false
scroll_horizontal = 0
scroll_vertical_enabled = true
scroll_vertical = 0
scroll_deadzone = 0
_sections_unfolded = [ "Scroll" ]

[node name="PuzzleList" type="VBoxContainer" parent="ScrollContainer" index="0"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_right = 920.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
mouse_filter = 1
mouse_default_cursor_shape = 0
size_flags_horizontal = 3
size_flags_vertical = 1
alignment = 0
_sections_unfolded = [ "Anchor", "Size Flags" ]

[node name="BackBtn" type="Button" parent="." index="2"]

anchor_left = 0.0
anchor_top = 1.0
anchor_right = 0.0
anchor_bottom = 1.0
margin_left = 20.0
margin_top = -100.0
margin_right = 190.0
margin_bottom = -15.0
rect_pivot_offset = Vector2( 0, 0 )
rect_clip_content = false
focus_mode = 2
mouse_filter = 0
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 1
custom_fonts/font = ExtResource( 2 )
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
group = null
text = "Back"
flat = false
align = 1
_sections_unfolded = [ "custom_colors", "custom_fonts" ]

[connection signal="pressed" from="BackBtn" to="." method="_on_BackBtn_pressed"]


